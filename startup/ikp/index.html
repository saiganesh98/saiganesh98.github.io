<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paddy Business Calculator</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; padding: 20px; color: #333; }
        .container { max-width: 600px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2e7d32; margin-bottom: 25px; }
        .section-title { font-weight: bold; margin-top: 15px; color: #1b5e20; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        label { font-size: 0.85rem; display: block; margin-bottom: 5px; color: #666; }
        input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        button { width: 100%; padding: 15px; background: #2e7d32; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1rem; margin-top: 25px; font-weight: bold; transition: background 0.3s; }
        button:hover { background: #1b5e20; }
        .result-box { margin-top: 25px; padding: 20px; background: #e8f5e9; border-left: 5px solid #2e7d32; border-radius: 6px; }
        .result-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.1rem; }
        .highlight { font-weight: bold; color: #2e7d32; }
    </style>
</head>
<body>

<div class="container">
    <h2>Paddy Expense Tool</h2>

    <div class="section-title">Purchase Details (Farmer)</div>
    <div class="grid">
        <div>
            <label>Paddy Price (Rs/kg)</label>
            <input type="number" id="paddyPrice" value="22.5" step="0.1">
        </div>
        <div>
            <label>Tractor Cost (Rs/bag)</label>
            <input type="number" id="tractorCost" value="50">
        </div>
        <div>
            <label>Gross Wt (kg/bag)</label>
            <input type="number" id="farmerGross" value="65">
        </div>
        <div>
            <label>Paid Wt (kg/bag)</label>
            <input type="number" id="farmerPaid" value="63">
        </div>
    </div>

    <div class="section-title">Handling at Your Location</div>
    <div class="grid">
        <div>
            <label>Unloading (Rs/bag)</label>
            <input type="number" id="unloading" value="10">
        </div>
        <div>
            <label>Unpacking (Rs/bag)</label>
            <input type="number" id="unpacking" value="10">
        </div>
        <div>
            <label>Hamali/Loading (Rs/quintal)</label>
            <input type="number" id="hamaliRate" value="60">
        </div>
    </div>

    <div class="section-title">Bag Management</div>
    <div class="grid">
        <div>
            <label>Initial Bag Cost (Rs)</label>
            <input type="number" id="bagCost" value="37">
        </div>
        <div>
            <label>Bag Resale Value (Rs)</label>
            <input type="number" id="bagResale" value="37">
        </div>
    </div>

    <div class="section-title">Sale Details (Miller)</div>
    <div class="grid">
        <div>
            <label>Miller Bag Size (kg)</label>
            <input type="number" id="millerSize" value="40">
        </div>
        <div>
            <label>Filling Wt (kg/bag)</label>
            <input type="number" id="millerFilling" value="41.5">
        </div>
    </div>

    <button onclick="calculateExpenses()">Calculate Net Results</button>

    <div id="results" class="result-box" style="display:none;">
        <div class="result-row">
            <span>Net Extra Cost / Quintal:</span>
            <span id="resExtra" class="highlight"></span>
        </div>
        <div class="result-row">
            <span>Total Cost / Quintal:</span>
            <span id="resTotal" class="highlight"></span>
        </div>
        <hr>
        <div class="result-row" style="font-size: 1.3rem;">
            <span>Break-even Price (per kg):</span>
            <span id="resBreakEven" class="highlight"></span>
        </div>
    </div>
</div>

<script>
function calculateExpenses() {
    // Inputs
    const price = parseFloat(document.getElementById('paddyPrice').value);
    const tractor = parseFloat(document.getElementById('tractorCost').value);
    const fGross = parseFloat(document.getElementById('farmerGross').value);
    const fPaid = parseFloat(document.getElementById('farmerPaid').value);
    const unload = parseFloat(document.getElementById('unloading').value);
    const unpack = parseFloat(document.getElementById('unpacking').value);
    const hamali = parseFloat(document.getElementById('hamaliRate').value);
    const bCost = parseFloat(document.getElementById('bagCost').value);
    const bResale = parseFloat(document.getElementById('bagResale').value);
    const mSize = parseFloat(document.getElementById('millerSize').value);
    const mFilling = parseFloat(document.getElementById('millerFilling').value);

    // 1. Calculations based on 100kg Paid Weight
    const bagsRequired = 100 / fPaid;
    
    // 2. Initial Logistics & Bag Loss
    const logisPerBag = tractor + unload + unpack;
    const bagLossPerBag = bCost - bResale;
    const stage1Cost = bagsRequired * (logisPerBag + bagLossPerBag);

    // 3. Weight Difference
    // Actual paddy in hand from farmer
    const actualPaddy = bagsRequired * fGross;
    // Actual paddy needed to satisfy 100kg miller payment
    const neededForMiller = (100 / mSize) * mFilling;
    const weightShortage = neededForMiller - actualPaddy;
    const weightShortageCost = weightShortage * price;

    // 4. Totals
    const netExtraCost = stage1Cost + hamali + weightShortageCost;
    const totalLandingCost = (price * 100) + netExtraCost;
    const breakEven = totalLandingCost / 100;

    // Display
    document.getElementById('results').style.display = 'block';
    document.getElementById('resExtra').innerText = "Rs " + netExtraCost.toFixed(2);
    document.getElementById('resTotal').innerText = "Rs " + totalLandingCost.toFixed(2);
    document.getElementById('resBreakEven').innerText = "Rs " + breakEven.toFixed(2);
}
</script>

</body>
</html>
